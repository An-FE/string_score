/*!
 * string_score.js: Quicksilver-like string scoring algorithm.
 *
 * Copyright (C) 2009-2011 Joshaven Potter <yourtech@gmail.com>
 * Copyright (C) 2010-2011 Yesudeep Mangalapilly <yesudeep@gmail.com>
 * MIT license: http://www.opensource.org/licenses/mit-license.php
*/
String.prototype.score=function(m,g){g=g||0;var e=0,q=m.length,f=this,p=f.length,o=0,k,j;if(f===m){return 1}for(var d=0,r,n,h,a,b,l;d<q;++d){h=m[d];a=f.indexOf(h.toLowerCase());b=f.indexOf(h.toUpperCase());l=Math.min(a,b);n=(l>-1)?l:Math.max(a,b);r=0.1;if(n===-1){if(g==0){return 0}else{r=r*g}}if(f[n]===h){r+=0.1}if(n===0){r+=0.8;if(d===0){o=1}}if(f.charAt(n-1)===" "){r+=0.8}f=f.substring(n+1,p);e+=r}k=e/q;j=((k*(q/p))+k)/2;if(o&&(j+0.1<1)){j+=0.1}return j};