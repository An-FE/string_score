/*!
 * string_score.js: Quicksilver-like string scoring algorithm.
 *
 * Copyright (C) 2009-2011 Joshaven Potter <yourtech@gmail.com>
 * Copyright (C) 2010-2011 Yesudeep Mangalapilly <yesudeep@gmail.com>
 * MIT license: http://www.opensource.org/licenses/mit-license.php
*/
String.prototype.score=function(n,h){var f=0,r=n.length,g=this,q=g.length,p,l,e=1,k;if(g==n){return 1}for(var d=0,s,o,j,a,b,m;d<r;++d){j=n[d];a=g.indexOf(j.toLowerCase());b=g.indexOf(j.toUpperCase());m=Math.min(a,b);o=(m>-1)?m:Math.max(a,b);if(o===-1){if(h){e+=1-h;break}else{return 0}}else{s=0.1}if(g[o]===j){s+=0.1}if(o===0){s+=0.6;if(d===0){p=1}}if(g.charAt(o-1)===" "){s+=0.8}g=g.substring(o+1,q);f+=s}l=f/r;k=((l*(r/q))+l)/2;k=k/e;if(p&&(k+0.15<1)){k+=0.15}return k};